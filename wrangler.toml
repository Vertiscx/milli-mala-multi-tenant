name = "milli-mala"
main = "src/worker.ts"
compatibility_date = "2024-09-23"
compatibility_flags = [ "nodejs_compat" ]

[vars]
LOG_LEVEL = "info"

# KV namespace for tenant configuration
[[kv_namespaces]]
binding = "TENANT_KV"
id = "your-tenant-kv-namespace-id"

# KV namespace for audit logs
[[kv_namespaces]]
binding = "AUDIT_LOG"
id = "your-audit-log-namespace-id"

# Secrets (set these with: wrangler secret put <NAME>)
# wrangler secret put AUDIT_SECRET

# ============================================
# STAGING ENVIRONMENT
# ============================================
# Deploy:  wrangler deploy --env staging
# Logs:    wrangler tail --env staging
# Secrets: wrangler secret put <NAME> --env staging
[env.staging]
name = "milli-mala-staging"

[env.staging.vars]
LOG_LEVEL = "debug"

[[env.staging.kv_namespaces]]
binding = "TENANT_KV"
id = "your-staging-tenant-kv-namespace-id"

[[env.staging.kv_namespaces]]
binding = "AUDIT_LOG"
id = "your-staging-audit-log-namespace-id"
